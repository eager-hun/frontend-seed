
// Extract variable from map, so that we can use it in calc().
$oneliner-height: map-get($form-widget-oneliner-height, default);

$btn-shdw-size: $oneliner-height * 0.5;

.button {
  @include strip-button();
  @include widget-vertical-padding-to-match-oneliners(
      $oneliner-height,
      $line-height-condensed
  );

  display: inline-block;
  padding-left: $form-widget-side-padding;
  padding-right: $form-widget-side-padding;

  border: 1px solid transparent;
  border-radius: $form-widget-border-radius;

  font-family: $font-sans;
  font-weight: 700;
  line-height: $line-height-condensed;
  min-height: $oneliner-height;

  text-align: center;
  vertical-align: top;

  transition: background-color $transition-speed-fast, $transition-easing-default,
  box-shadow $transition-speed-fast, $transition-easing-default;

  cursor: pointer;
  user-select: none;

  box-shadow: button-inset-box-shadows(),
  0 0 3px -1px white,
  0 5px 7px -3px color(shadow);

  &:not(:disabled):hover,
  &:focus {
    box-shadow: button-inset-box-shadows(),
    0 0 3px -1px white,
    0 8px 8px -3px color(shadow);
  }
}


// #############################################################################
// "Shape" variants.

// -----------------------------------------------------------------------------
// "Button oneliner" is a button that's matching "oneliner inputs".

.button--oneliner {
  height: $oneliner-height;

  // Note: buttons do need the line-height-hack.
  // (Also need to distract the border-width for better vertical alignment.
  line-height: calc(#{$oneliner-height} - 2px);

  padding-top: 0;
  padding-bottom: 0;

  max-width: 100%;
  white-space: nowrap;
}

// -----------------------------------------------------------------------------
// Wide.

.button--fullwidth {
  width: 100%;
}

// -----------------------------------------------------------------------------
// With icon.
// More declarations at the size variants.

$button-icon-size-default: 1.35em;

.button--icon-prefix,
.button--icon-suffix {
  position: relative;

  .button__icon {
    position: absolute;
  }
}

.button--icon-prefix {
  .button__icon {
    left: $form-widget-side-padding;
  }
}

.button--icon-suffix {
  .button__icon {
    right: $form-widget-side-padding;
  }
}


// #############################################################################
// Size variants.

// -----------------------------------------------------------------------------
// Small.

$oneliner-height-small: map-get($form-widget-oneliner-height, smallforms);

$button-icon-size-small: 1.25em;

.button.button--small {
  @include widget-vertical-padding-to-match-oneliners(
    $oneliner-height-small,
    $line-height-condensed
  );

  min-height: $oneliner-height-small;

  font-size: map-get($form-font-size, smallforms);
}

// @techdebt
.form--small .button,
.button.button.button--small {
  .button__icon {
    top: calc(((#{$oneliner-height-small} - #{$button-icon-size-small}) * 0.5) - 2px);

    height: $button-icon-size-small;
    width: $button-icon-size-small;
  }
  &.button--icon-prefix {
    .button__text {
      margin-left: $button-icon-size-small + ($form-widget-side-padding * 0.75);
    }
  }
  &.button--icon-suffix {
    .button__text {
      margin-right: $button-icon-size-small + ($form-widget-side-padding * 0.75);
    }
  }
}

// -----------------------------------------------------------------------------
// Default.

$oneliner-height-default: map-get($form-widget-oneliner-height, default);

$button-icon-size-default: 1.35em;

.button.button--size-default {
  @include widget-vertical-padding-to-match-oneliners(
    $oneliner-height-default,
    $line-height-condensed
  );

  min-height: $oneliner-height-default;

  font-size: map-get($form-font-size, default);
}

// @techdebt
.button,
.button.button.button--size-default {
  .button__icon {
    top: calc(((#{$oneliner-height-default} - #{$button-icon-size-default}) * 0.5) - 2px);

    height: $button-icon-size-default;
    width: $button-icon-size-default;
  }
  &.button--icon-prefix {
    .button__text {
      margin-left: $button-icon-size-default + ($form-widget-side-padding * 0.75);
    }
  }
  &.button--icon-suffix {
    .button__text {
      margin-right: $button-icon-size-default + ($form-widget-side-padding * 0.75);
    }
  }
}


// -----------------------------------------------------------------------------
// Big.

$oneliner-height-big: map-get($form-widget-oneliner-height, bigforms);

$button-icon-size-big: 1.5em;

.button.button--big {
  @include widget-vertical-padding-to-match-oneliners(
      $oneliner-height-big,
      $line-height-condensed
  );

  min-height: $oneliner-height-big;

  font-size: map-get($form-font-size, bigforms);
}

// @techdebt
.form--big .button,
.button.button.button--big {
  .button__icon {
    top: calc(((#{$oneliner-height-big} - #{$button-icon-size-big}) * 0.5) - 2px);

    height: $button-icon-size-big;
    width: $button-icon-size-big;
  }
  &.button--icon-prefix {
    .button__text {
      margin-left: $button-icon-size-big + ($form-widget-side-padding * 0.75);
    }
  }
  &.button--icon-suffix {
    .button__text {
      margin-right: $button-icon-size-big + ($form-widget-side-padding * 0.75);
    }
  }
}


// #############################################################################
// Color variants.

@each $name, $data in $button-colors {
  .button--#{$name} {
    background-color:     map-get($data, background-color);
    text-shadow:          0 1px 3px map-get($data, text-shadow-color);

    &,
    &:hover,
    &:visited,
    &:visited:hover
    {
      color:              map-get($data, color);
    }

    &:hover,
    &:focus {
      background-color:   map-get($data, background-color-hover);
      color:              map-get($data, color);
    }
    &:focus {
      outline: none;
    }

    &:disabled,
    &:disabled:hover {
      background-color:   map-get($data, background-color-disabled);
      color:              map-get($data, color-disabled);
      text-shadow: none;
      cursor: auto;
    }
  }
}
