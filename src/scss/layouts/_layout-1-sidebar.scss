
.layout-1-sidebar {

  .layout__element {
    @include fit-content();
  }
  .layout__sidebar {
    @include gap(margin, top, $stack-gap-factor);
  }

  // ---------------------------------------------------------------------------
  // As the screen grows, time for side-by-side arrangement.

  @media (min-width: breakpoint(wide-min)) {
    @include cheap-grid($wrap: true, $item-classname: layout__element);

    .layout__element {
      flex: 0 0 auto;
    }

    // The default state assumes that we don't actually have a sidebar.
    .layout__main {
      width: 100%;
    }

    .layout__sidebar {
      margin-top: 0;
    }

    // But if there is a sidebar, then:
    &.has-sidebar {
      .layout__main {
        @include apply-grid-item-width($item-width: 15, $of-total-cols: 24);
      }
      .layout__sidebar {
        @include apply-grid-item-width($item-width: 8, $of-total-cols: 24);
      }
    }

    // -------------------------------------------------------------------------
    // Sidebar on the right side.

    &.sidebar-on-right {
      .layout__sidebar {
        margin-left: auto;
      }
    }

    // -------------------------------------------------------------------------
    // Sidebar on the left side.

    &.sidebar-on-left {
      .layout__main {
        order: 2;

        // Sending it to the opposite side, thus using all the remaining
        // available width to contribute to the gap between the items.
        margin-left: auto;
      }
      .layout__sidebar {
        order: 1;
      }
    }
  }

  // ---------------------------------------------------------------------------
  // Resize the columns to better suit wider screens.

  @media (min-width: breakpoint(wide-mt-min)) {
    &.has-sidebar {
      .layout__main {
        @include apply-grid-item-width($item-width: 16, $of-total-cols: 24);
      }
      .layout__sidebar {
        @include apply-grid-item-width($item-width: 7, $of-total-cols: 24);
      }
    }
  }
}


// #############################################################################
// Sidebar box arrangement.

.sidebar-box-arrangement {
  @include grid-wrapping-for-cols(1, $item-classname: box-guide);

  // As the screen grows, time for side-by-side arrangement.
  @media (min-width: breakpoint(narrow-ht-min)) and (max-width: breakpoint(narrow-max)) {
    @include cheap-grid($wrap: true, $item-classname: box-guide);
    @include grid-wrapping-for-cols(2, $item-classname: box-guide);

    & > .box-guide {
      @include apply-grid-item-width(1, 2);

      flex: 1 1 auto;
    }
  }
}


